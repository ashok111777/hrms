<div>
    <div>
        <mat-card>
            <mat-card-content>
                <mat-stepper labelPosition="bottom" linear="true" #stepper>
                    <mat-step [stepControl]="otpForm" [editable]="isEditable">
                        <form class="form ps-2 pe-2" [formGroup]="otpForm">
                            <div class="text-center ">
                                <img src="assets\imgs\email.png" alt="Mail" class="rounded mx-auto d-block"
                                    style="height: 50px;">
                            </div>
                            <h2 style="font-weight: bold;">Check Your E-Mail!</h2>
                            <div class="w-100">
                                <div class="text-center">
                                    <h3 style="font-weight: 500;">
                                        Enter The security code
                                    </h3>
                                </div>
                                <div class="p-4">
                                    <div class="otp-container">
                                        <input *ngFor="let i of [0, 1, 2, 3, 4, 5]" class="otp-input" type="text"
                                            formControlName="digit{{i}}" (input)="onOtpInputChange($event, i)"
                                            [maxlength]="1" [attr.id]="'digit' + i" />
                                        <!-- <ngx-otp-input  class="text-center" [config]="otpInputConfig" (otpChange)="handeOtpChange($event)"
                                            (fill)="handleFillEvent($event)">
                                        </ngx-otp-input> -->
                                    </div>
                                    <br>
                                    <button mat-raised-button color="primary" class="btn btn-primary w-100"
                                        (click)="removeOtpRefValidator(stepper)">Verify</button>
                                </div>
                                <div class="timer-container">
                                    <div *ngIf="timer > 0" class="timer-message">Resend OTP in {{ timer }} seconds</div>
                                    <div *ngIf="timer === 0">
                                        <button mat-flat-button color="accent" class="btn btn-primary"
                                            (click)="resendOTP()" [disabled]="resendDisabled">Resend
                                            Code</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div>
                            <!-- <button mat-button matStepperNext>Next</button> -->
                        </div>
                    </mat-step>
                    <mat-step labelPosition="bottom" [stepControl]="verficationForm" [editable]="isEditable">
                        <div class="text-center">
                            <h2 style="font-weight:bolder;"> Set new Password</h2>
                            <h3 style="font-weight: 500;" class="text-capitalize"> your new password must be different
                                must
                                be different to previouly used password </h3>
                        </div>
                        <form class="form ps-2 pe-2" [formGroup]="verficationForm">
                            <mat-form-field class="w-100">
                                <mat-label>Password</mat-label>
                                <mat-icon matPrefix color="primary">lock</mat-icon>
                                <input matInput type="password" placeholder="Password" formControlName="password1"
                                    name="password" required [type]="showPassword ? 'text' : 'password'">

                                <mat-error *ngIf="verficationForm.get('password1')?.hasError('pattern')">
                                    <p>password must be these format: Xx@yy1 </p>
                                </mat-error>

                                <mat-icon matSuffix (click)="togglePasswordVisibility()">
                                    {{showPassword?'visibility_off':'visibility'}}
                                </mat-icon>
                            </mat-form-field>

                            <mat-form-field class="w-100">
                                <mat-label>Confirm Password</mat-label>
                                <mat-icon matPrefix color="primary">lock</mat-icon>
                                <input matInput type="password" placeholder="Password" formControlName="password2"
                                    name="password2" required [type]="showPassword ? 'text' : 'password2'">
                                <mat-error *ngIf="verficationForm.get('password2')?.hasError('pattern')">Password same
                                    as above
                                </mat-error>
                                <mat-icon matSuffix (click)="togglePasswordVisibility()">
                                    {{showPassword?'visibility_off':'visibility'}}
                                </mat-icon>
                            </mat-form-field>
                        </form>
                        <div class="text-center">
                            <button mat-button class="btn" color="primary"
                                (click)="removeValidator(stepper)">Submit</button>

                            <!-- <button mat-button class="btn btn-primary w-100" matStepperPrevious>
                                <mat-icon>arrow_back_ios_new</mat-icon>
                                Back to Login page</button> -->
                        </div>
                    </mat-step>
                    <mat-step [completed]="otpVerified">
                        <p>You're welcome.</p>
                        <div>
                            <div class="text-center ">
                                <img src="assets\imgs\check.png" alt="OK" class="rounded mx-auto d-block"
                                    style="height: 60px;">
                            </div>
                            <h2>Password reset</h2>
                            <h3>Your Pasword has been reset successfully</h3>

                            <br>
                            <div class="text-center p-2">
                                <!-- <button mat-raised-button class="btn" class="btn btn-primary w-100" (click)="close('')"
                                    color="primary">Continue</button> -->
                                <br>
                                <button mat-button class="btn btn-primary w-100" (click)="backtomainpage('')">
                                    <mat-icon>arrow_back_ios_new</mat-icon>
                                    Back to Login page</button>
                            </div>
                        </div>

                    </mat-step>
                </mat-stepper>

            </mat-card-content>


        </mat-card>

    </div>
</div>